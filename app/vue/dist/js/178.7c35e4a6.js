"use strict";(self["webpackChunkmall_management"]=self["webpackChunkmall_management"]||[]).push([[178],{89178:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"font-size":"16px",position:"absolute",top:"12px",right:"40px"}},[a("el-link",{staticStyle:{"font-size":"16px",cursor:"pointer","margin-top":"10px"},attrs:{underline:!1,type:"primary"},on:{click:t.addBooks}},[a("i",{staticClass:"iconfont iconxinjian",staticStyle:{"padding-right":"5px"}}),t._v("新增")])],1),a("div",{attrs:{id:"top"}},[a("div",[a("span",[t._v("ISBN")]),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入",size:"mini"},model:{value:t.params.isbn,callback:function(e){t.$set(t.params,"isbn",e)},expression:"params.isbn"}}),a("span",[t._v("书名")]),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入",size:"mini"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}}),a("span",[t._v("作者")]),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入",size:"mini"},model:{value:t.params.author,callback:function(e){t.$set(t.params,"author",e)},expression:"params.author"}}),a("el-button-group",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")]),a("el-button",{attrs:{size:"mini"},on:{click:t.resetTable}},[t._v("重置")])],1)],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","text-align":"center","line-height":"18px"},attrs:{data:t.tableData,size:"small",border:"",height:t.height-130}},[a("el-table-column",{attrs:{label:"ISBN10",align:"center",prop:"isbn10","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"ISBN13",align:"center",prop:"isbn13",width:"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"书名",align:"center",prop:"title","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"作者",align:"center",prop:"author","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"出版社",align:"center",prop:"publisher","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"简介",align:"center",prop:"summary","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showInfo(l)}}},[t._v("查看")])]}}])}),a("el-table-column",{attrs:{label:"价格",align:"center",prop:"price","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"封面",align:"center",prop:"image","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("el-image",{staticStyle:{height:"100px"},attrs:{src:e.image,fit:"cover"}})]}}])}),a("el-table-column",{attrs:{label:"装订",align:"center",prop:"binding","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-link",{attrs:{type:"warning",disabled:""},on:{click:function(e){return t.del(l)}}},[t._v("删除")])]}}])}),a("template",{slot:"empty"},[a("div",[a("i",{staticClass:"iconfont iconzanwuziyuan",staticStyle:{"font-size":"40px",color:"#8c8c8c"}},[a("p",{staticStyle:{"font-size":"14px","margin-top":"-30px"}},[t._v("暂无资源")])])])])],2),a("el-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{"current-page":t.currentPage,"page-sizes":[20,100,150,200],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,width:"650px","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.resetForm}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":"top","label-width":"80px",model:t.form,size:"mini"}},[a("el-form-item",{attrs:{label:"isbn"}},[a("el-input",{model:{value:t.form.isbn,callback:function(e){t.$set(t.form,"isbn",e)},expression:"form.isbn"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:t.cancelForm}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提 交")])],1)],1)],1)},o=[],i={name:"book_management",components:{},props:{height:{type:Number}},data(){return{loading:!1,currentPage:1,pageSize:20,total:0,params:{name:"",isbn:"",author:""},tableData:[],dialogFormVisible:!1,dialogTitle:"管理",form:{isbn:""}}},created(){},mounted(){this.getData()},methods:{getData(){this.$reqGet("mall/books/all").then((t=>{200==t.code?this.tableData=t.data:this.$message.error(t.msg)}))},submitForm(t){this.$refs[t].validate((t=>{if(!t)return console.log("error submit!!"),!1;this.$reqPost("/ali/getInfoByIsbn",{...this.form}).then((t=>{200==t.code?(t.data&&(this.dialogFormVisible=!1),this.getData()):this.$message.error(t.msg)}))}))},cancelForm(){this.dialogFormVisible=!1},resetForm(){this.$refs["ruleForm"].resetFields(),this.form={isbn:""},this.getData()},handleSizeChange(t){this.pageSize=t},handleCurrentChange(t){this.currentPage=t},handleSelectionChange(t){console.log(t)},search(){console.log(this.params),this.getData()},resetTable(){this.params={openid:"",id:"",phoneNumber:"",status:""},this.getData()},del(t){console.log(t)},showInfo(t){this.$alert(t.summary,"简介",{confirmButtonText:"确定",customClass:"summary"})},addBooks(){this.dialogFormVisible=!0}}},s=i,r=a(43736),n=(0,r.Z)(s,l,o,!1,null,"46115bd0",null),c=n.exports}}]);
//# sourceMappingURL=178.7c35e4a6.js.map