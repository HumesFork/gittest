"use strict";(self["webpackChunkmall_management"]=self["webpackChunkmall_management"]||[]).push([[9],{77001:function(e,t,a){a.d(t,{Z:function(){return y}});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,limit:1,action:"",headers:{"content-type":"application/json"},data:{url:e.imageUrl},name:"file","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"before-remove":e.handleRemove}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},r=[],n=a(15677);const o="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:o};a(48675),a(37380),a(1118),a(21703);let s;const c=new Uint8Array(16);function m(){if(!s&&(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(c)}const u=[];for(let x=0;x<256;++x)u.push((x+256).toString(16).slice(1));function d(e,t=0){return(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase()}function p(e,t,a){if(i.randomUUID&&!t&&!e)return i.randomUUID();e=e||{};const l=e.random||(e.rng||m)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=l[e];return t}return d(l)}var h=p,g={name:"upload-com",props:{height:{type:Number},url:{type:String}},watch:{url(e){""!=e&&null!=e&&(this.imageUrl=e)}},data(){return{imageUrl:""}},created(){this.imageUrl=this.url},methods:{handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a="image/png"===e.type,l=e.size/1024/1024<5;if(t||a)if(l){let t=h(),a=(new Date).getTime().toString().split("").reverse().join(""),l=e.type.split("/")[1],r=`${t}-${a}.${l}`;console.log(r),n.Z.putFile(r,e).then((e=>{this.$emit("success",e.data)})).catch((function(e){this.$emit("fail",e)}))}else this.$message.error("上传图片大小不能超过 5MB!");else this.$message.error("上传图片只能是 JPG或者PNG 格式!");return(t||a)&&l},setImage(e){this.imageUrl=e},handleRemove(){this.imageUrl=""}}},f=g,b=a(43736),v=(0,b.Z)(f,l,r,!1,null,"bc914e22",null),y=v.exports},44009:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"规则管理",name:"first"}},[a("rule_form",{attrs:{height:e.height}})],1),a("el-tab-pane",{attrs:{label:"回复管理",name:"second"}},[a("reply_form",{attrs:{height:e.height}})],1),a("el-tab-pane",{attrs:{label:"海报管理",name:"third"}},[a("poster_cop",{attrs:{height:e.height}})],1),a("el-tab-pane",{attrs:{label:"数据管理",name:"fourth"}},[a("data_cop",{attrs:{height:e.height}})],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"规则描述："}},[a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)},o=[],i={name:"rule_form",data(){return{form:{content:""},id:null}},mounted(){this.getData()},methods:{getData(){this.$reqGet("/recommend/rule").then((e=>{200==e.code?(this.form.content=e.data.content,this.id=e.data.id):this.$message.error(e.msg)}))},onSubmit(){let e="$reqPost";this.id&&(e="$reqPut"),this[e]("/recommend/manageRule",{content:this.form.content,id:this.id}).then((e=>{200==e.code?(this.$message.success("提交成功"),this.getData()):this.$message.error(e.msg)}))}}},s=i,c=a(43736),m=(0,c.Z)(s,n,o,!1,null,null,null),u=m.exports,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"回复文案："}},[a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)},p=[],h={name:"reply_form",data(){return{form:{content:""},id:null}},mounted(){this.getData()},methods:{getData(){this.$reqGet("/recommend/reply").then((e=>{200==e.code?(this.form.content=e.data.content,this.id=e.data.id):this.$message.error(e.msg)}))},onSubmit(){let e="$reqPost";this.id&&(e="$reqPut"),this[e]("/recommend/manageReply",{content:this.form.content,id:this.id}).then((e=>{200==e.code?(this.$message.success("提交成功"),this.getData()):this.$message.error(e.msg)}))}}},g=h,f=(0,c.Z)(g,d,p,!1,null,null,null),b=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-link",{staticStyle:{"font-size":"16px",cursor:"pointer",float:"right","margin-bottom":"10px",color:""},attrs:{underline:!1,type:"primary"},on:{click:e.add}},[a("i",{staticClass:"iconfont iconxinjian",staticStyle:{"padding-right":"5px"}}),e._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","text-align":"center","line-height":"18px","overflow-y":"auto"},attrs:{data:e.tableData,size:"small",border:"",height:e.height-120}},[a("el-table-column",{attrs:{label:"名字",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"图片",align:"center",prop:"url","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"创建日期",align:"center",prop:"date"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc"},on:{change:function(t){e.handleChange(t,l)}},model:{value:l.choose,callback:function(t){e.$set(l,"choose",t)},expression:"row.choose"}}),a("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.handleDelete(l)}}})]}}])}),a("template",{slot:"empty"},[a("div",[a("i",{staticClass:"iconfont iconzanwuziyuan",staticStyle:{"font-size":"40px",color:"#8c8c8c"}},[a("p",{staticStyle:{"font-size":"14px","margin-top":"-30px"}},[e._v("暂无资源")])])])])],2),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"650px","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.resetForm}},[a("el-form",{ref:"ruleForm",attrs:{size:"mini",model:e.form}},[a("el-form-item",{attrs:{label:"图片:"}},[a("upload",{ref:"myupload",attrs:{url:e.url},on:{success:e.handleSuccess}})],1),a("el-form-item",{attrs:{label:"名字:",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"是否启用:"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提 交")])],1)],1)],1)},y=[],x=a(77001),_={name:"poster_cop",components:{upload:x.Z},props:{height:{type:Number}},data(){return{loading:!1,tableData:[],dialogFormVisible:!1,dialogTitle:"管理",form:{name:"",status:!1,url:null},url:null}},created(){},mounted(){},methods:{submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log(this.form.url)}))},resetForm(){this.form.name="",this.form.status=!1,this.form.url=null,this.url=null,this.$refs.myupload.handleRemove()},cancelForm(){this.dialogFormVisible=!1},add(){this.dialogTitle="新增",this.dialogFormVisible=!0},handleChange(e,t){console.log(e,t)},handleDelete(e){this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((()=>{console.log(e)}))},handleSuccess(e){console.log(e),this.form.url=e.url}}},w=_,$=(0,c.Z)(w,v,y,!1,null,"167b5ee7",null),k=$.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"top"}},[a("div",[a("span",[e._v("荐书者")]),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入",size:"mini"},model:{value:e.recommender,callback:function(t){e.recommender=t},expression:"recommender"}}),a("span",[e._v("书名")]),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入",size:"mini"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("span",{staticStyle:{"margin-right":"10px"}},[e._v("荐书日期")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("是否上架")]),a("el-select",{staticClass:"search",attrs:{placeholder:"请选择",size:"mini"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("el-option",{attrs:{label:"是",value:"on"}}),a("el-option",{attrs:{label:"否",value:"off"}})],1),a("el-button-group",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")]),a("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("重置")])],1)],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","text-align":"center","line-height":"18px"},attrs:{data:e.tableData,size:"small",border:"",height:e.height-180}},[a("el-table-column",{attrs:{label:"书名",align:"center",prop:"name","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"作者",align:"center",prop:"author"}}),a("el-table-column",{attrs:{label:"内容",align:"center",prop:"content"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showInfo(l)}}},[e._v("查看")])]}}])}),a("el-table-column",{attrs:{label:"推荐人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(null!=a.user?a.user.username:"无")+" ")]}}])}),a("el-table-column",{attrs:{label:"荐书日期",align:"center",width:"150"}}),a("el-table-column",{attrs:{label:"是否上架 ",align:"center",prop:"electronicTag",width:"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("el-switch",{attrs:{"active-text":"采纳","inactive-text":"不采纳"},model:{value:l.status,callback:function(t){e.$set(l,"status",t)},expression:"row.status"}}),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-link",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"}},[e._v("回复")]),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleDelete(l)}}},[e._v("删除")])],1)]}}])}),a("template",{slot:"empty"},[a("div",[a("i",{staticClass:"iconfont iconzanwuziyuan",staticStyle:{"font-size":"40px",color:"#8c8c8c"}},[a("p",{staticStyle:{"font-size":"14px","margin-top":"-30px"}},[e._v("暂无资源")])])])])],2),a("el-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-sizes":[20,100,150,200],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},z=[],C={name:"data_cop",components:{},props:{height:{type:Number}},data(){return{loading:!1,currentPage:1,pageSize:20,total:0,tableData:[],recommender:"",name:"",dateValue:"",status:""}},created(){},mounted(){this.getData()},methods:{getData(){this.$reqGet("/recommend/allData").then((e=>{200==e.code?this.tableData=e.data:this.$message.error(e.msg)}))},handleDelete(e){this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((()=>{let t=e.id;this.$reqDel("/recommend/delData",{id:t}).then((e=>{200==e.code?(this.$message.success("操作成功"),this.getData()):this.$message.error(e.msg)}))}))},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e},handleSelectionChange(e){console.log(e)},search(){console.log(this.recommender,this.name,this.dateValue,this.status)},reset(){this.recommender="",this.name="",this.dateValue="",this.status=""},showInfo(e){this.$alert(e.content,"内容",{confirmButtonText:"确定"})}}},D=C,U=(0,c.Z)(D,S,z,!1,null,"f343c2a4",null),F=U.exports,V={name:"recommend_cop",props:{height:{type:Number}},components:{rule_form:u,reply_form:b,poster_cop:k,data_cop:F},data(){return{activeName:"first"}},methods:{handleClick(e,t){console.log(e,t)}}},T=V,N=(0,c.Z)(T,l,r,!1,null,null,null),R=N.exports}}]);
//# sourceMappingURL=9.a28e4369.js.map