"use strict";(self["webpackChunkmall_management"]=self["webpackChunkmall_management"]||[]).push([[751],{32751:function(t,e,o){o.r(e),o.d(e,{default:function(){return w}});var l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"表情包管理",name:"first"}},[o("footage_cop",{attrs:{height:t.height}})],1),o("el-tab-pane",{attrs:{label:"分享背景图片管理",name:"second"}},[o("background_cop",{attrs:{height:t.height}})],1)],1)},a=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("el-link",{staticStyle:{"font-size":"16px",cursor:"pointer",float:"right","margin-bottom":"10px",color:""},attrs:{underline:!1,type:"primary"},on:{click:t.add}},[o("i",{staticClass:"iconfont iconxinjian",staticStyle:{"padding-right":"5px"}}),t._v("新增")])],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","text-align":"center","line-height":"18px","overflow-y":"auto"},attrs:{data:t.tableData,size:"small",border:"",height:t.height-120}},[o("el-table-column",{attrs:{label:"表情包",align:"center",prop:"url","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[o("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.url,fit:"cover"}})]}}])}),o("el-table-column",{attrs:{label:"名字 ",align:"center",prop:"name"}}),o("el-table-column",{attrs:{label:"是否启用",align:"center",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(" "+t._s(o.status?"是":"否")+" ")]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[o("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.edit(l)}}}),o("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.handleDelete(l)}}})]}}])}),o("template",{slot:"empty"},[o("div",[o("i",{staticClass:"iconfont iconzanwuziyuan",staticStyle:{"font-size":"40px",color:"#8c8c8c"}},[o("p",{staticStyle:{"font-size":"14px","margin-top":"-30px"}},[t._v("暂无资源")])])])])],2),o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,width:"650px","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.resetForm}},[o("el-form",{ref:"ruleForm",attrs:{size:"mini",model:t.form}},[o("el-form-item",{attrs:{label:"图片:"}},[o("upload",{ref:"myupload",attrs:{url:t.url},on:{success:t.handleSuccess}})],1),o("el-form-item",{attrs:{label:"名字:",prop:"name"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"是否启用:"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"mini"},on:{click:t.cancelForm}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提 交")])],1)],1)],1)},r=[],s=o(77001),n={name:"footage_cop",components:{upload:s.Z},props:{height:{type:Number}},data(){return{loading:!1,tableData:[],dialogFormVisible:!1,dialogTitle:"新增",form:{name:"",status:!1,url:null},url:null}},created(){},mounted(){this.getData()},methods:{getData(){this.$reqGet("/community/mood").then((t=>{200==t.code?this.tableData=t.data:this.$message.error(t.msg)}))},submitForm(t){this.$refs[t].validate((t=>{if(!t)return console.log("error submit!!"),!1;{let t=this.form.id?"/community/editMoods":"/community/addMoods";this.$reqPost(t,{...this.form}).then((t=>{200==t.code?(this.dialogFormVisible=!1,this.getData()):this.$message.error(t.msg)}))}}))},resetForm(){this.form.name="",this.form.status=!1,this.form.url=null,this.url=null,this.$refs.myupload.handleRemove()},cancelForm(){this.dialogFormVisible=!1},add(){this.dialogTitle="管理",this.dialogFormVisible=!0},edit(t){this.form={...t},this.url=t.url,this.dialogFormVisible=!0},handleDelete(t){this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((()=>{let e=t.id;this.$reqPost("/community/delMoods",{id:e}).then((t=>{200==t.code?this.getData():this.$message.error(t.msg)})),console.log(t)}))},handleSuccess(t){console.log(t),this.form.url=t.url}}},c=n,m=o(43736),u=(0,m.Z)(c,i,r,!1,null,"366f2135",null),d=u.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("el-link",{staticStyle:{"font-size":"16px",cursor:"pointer",float:"right","margin-bottom":"10px",color:""},attrs:{underline:!1,type:"primary"},on:{click:t.add}},[o("i",{staticClass:"iconfont iconxinjian",staticStyle:{"padding-right":"5px"}}),t._v("新增")])],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%","text-align":"center","line-height":"18px","overflow-y":"auto"},attrs:{data:t.tableData,size:"small",border:"",height:t.height-120}},[o("el-table-column",{attrs:{label:"图片",align:"center",prop:"url","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[o("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.url,fit:"cover"}})]}}])}),o("el-table-column",{attrs:{label:"名字 ",align:"center",prop:"name"}}),o("el-table-column",{attrs:{label:"是否启用",align:"center",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(" "+t._s(o.status?"是":"否")+" ")]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[o("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.edit(l)}}}),o("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.handleDelete(l)}}})]}}])}),o("template",{slot:"empty"},[o("div",[o("i",{staticClass:"iconfont iconzanwuziyuan",staticStyle:{"font-size":"40px",color:"#8c8c8c"}},[o("p",{staticStyle:{"font-size":"14px","margin-top":"-30px"}},[t._v("暂无资源")])])])])],2),o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,width:"650px","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.resetForm}},[o("el-form",{ref:"ruleForm",attrs:{size:"mini",model:t.form}},[o("el-form-item",{attrs:{label:"图片:"}},[o("upload",{ref:"myupload",attrs:{url:t.url},on:{success:t.handleSuccess}})],1),o("el-form-item",{attrs:{label:"名字:",prop:"name"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"是否启用:"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"mini"},on:{click:t.cancelForm}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提 交")])],1)],1)],1)},f=[],h={name:"background_cop",components:{upload:s.Z},props:{height:{type:Number}},data(){return{loading:!1,tableData:[],dialogFormVisible:!1,dialogTitle:"管理",form:{name:"",status:!1,url:null},url:null}},created(){},mounted(){this.getData()},methods:{getData(){this.$reqGet("/community/allPoster").then((t=>{200==t.code?this.tableData=t.data:this.$message.error(t.msg)}))},submitForm(t){this.$refs[t].validate((t=>{if(!t)return console.log("error submit!!"),!1;{console.log(t);let e=this.form.id?"/community/editPoster":"/community/addPoster";this.$reqPost(e,{...this.form}).then((t=>{200==t.code?(this.dialogFormVisible=!1,this.getData()):this.$message.error(t.msg)}))}}))},resetForm(){this.form.name="",this.form.status=!1,this.form.url=null,this.url=null,this.$refs.myupload.handleRemove()},cancelForm(){this.dialogFormVisible=!1},add(){this.dialogTitle="管理",this.dialogFormVisible=!0},edit(t){this.form={...t},this.url=t.url,this.dialogFormVisible=!0},handleDelete(t){this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((()=>{let e=t.id;this.$reqPost("/community/delPoster",{id:e}).then((t=>{200==t.code?this.getData():this.$message.error(t.msg)})),console.log(t)}))},handleSuccess(t){console.log(t),this.form.url=t.url}}},g=h,b=(0,m.Z)(g,p,f,!1,null,"1f05139c",null),v=b.exports,y={name:"clockIn_cop",props:{height:{type:Number}},components:{footage_cop:d,background_cop:v},mounted(){},data(){return{activeName:"first"}},methods:{handleClick(t,e){console.log(t,e)}}},x=y,k=(0,m.Z)(x,l,a,!1,null,null,null),w=k.exports},77001:function(t,e,o){o.d(e,{Z:function(){return y}});var l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,limit:1,action:"",headers:{"content-type":"application/json"},data:{url:t.imageUrl},name:"file","on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"before-remove":t.handleRemove}},[t.imageUrl?o("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},a=[],i=o(15677);const r="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var s={randomUUID:r};o(48675),o(37380),o(1118),o(21703);let n;const c=new Uint8Array(16);function m(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(c)}const u=[];for(let x=0;x<256;++x)u.push((x+256).toString(16).slice(1));function d(t,e=0){return(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase()}function p(t,e,o){if(s.randomUUID&&!e&&!t)return s.randomUUID();t=t||{};const l=t.random||(t.rng||m)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,e){o=o||0;for(let t=0;t<16;++t)e[o+t]=l[t];return e}return d(l)}var f=p,h={name:"upload-com",props:{height:{type:Number},url:{type:String}},watch:{url(t){""!=t&&null!=t&&(this.imageUrl=t)}},data(){return{imageUrl:""}},created(){this.imageUrl=this.url},methods:{handleAvatarSuccess(t,e){this.imageUrl=URL.createObjectURL(e.raw)},beforeAvatarUpload(t){const e="image/jpeg"===t.type,o="image/png"===t.type,l=t.size/1024/1024<5;if(e||o)if(l){let e=f(),o=(new Date).getTime().toString().split("").reverse().join(""),l=t.type.split("/")[1],a=`${e}-${o}.${l}`;console.log(a),i.Z.putFile(a,t).then((t=>{this.$emit("success",t.data)})).catch((function(t){this.$emit("fail",t)}))}else this.$message.error("上传图片大小不能超过 5MB!");else this.$message.error("上传图片只能是 JPG或者PNG 格式!");return(e||o)&&l},setImage(t){this.imageUrl=t},handleRemove(){this.imageUrl=""}}},g=h,b=o(43736),v=(0,b.Z)(g,l,a,!1,null,"bc914e22",null),y=v.exports}}]);
//# sourceMappingURL=751.1f1102b1.js.map